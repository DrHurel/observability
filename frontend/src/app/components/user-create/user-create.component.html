<div class="container">
    <h2>Create New User</h2>

    @if (successMessage()) {
    <div class="success-message">{{ successMessage() }}</div>
    }

    @if (errorMessage()) {
    <div class="error-message">{{ errorMessage() }}</div>
    }

    <form [formGroup]="userForm" (ngSubmit)="onSubmit()" class="user-form">
        <div class="form-group">
            <label for="name">Name *</label>
            <input id="name" type="text" formControlName="name" placeholder="Enter name"
                [class.invalid]="userForm.get('name')?.invalid && userForm.get('name')?.touched" />
            @if (userForm.get('name')?.invalid && userForm.get('name')?.touched) {
            <span class="error-text">Name is required</span>
            }
        </div>

        <div class="form-group">
            <label for="email">Email *</label>
            <input id="email" type="email" formControlName="email" placeholder="Enter email"
                [class.invalid]="userForm.get('email')?.invalid && userForm.get('email')?.touched" />
            @if (userForm.get('email')?.invalid && userForm.get('email')?.touched) {
            <span class="error-text">Valid email is required</span>
            }
        </div>

        <div class="form-group">
            <label for="age">Age *</label>
            <input id="age" type="number" formControlName="age" placeholder="Enter age"
                [class.invalid]="userForm.get('age')?.invalid && userForm.get('age')?.touched" />
            @if (userForm.get('age')?.invalid && userForm.get('age')?.touched) {
            <span class="error-text">Age must be 0 or greater</span>
            }
        </div>

        <div class="form-group">
            <label for="password">Password *</label>
            <input id="password" type="password" formControlName="password" placeholder="Enter password"
                [class.invalid]="userForm.get('password')?.invalid && userForm.get('password')?.touched" />
            @if (userForm.get('password')?.invalid && userForm.get('password')?.touched) {
            <span class="error-text">Password is required</span>
            }
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary" [disabled]="userForm.invalid || submitting()">
                {{ submitting() ? 'Creating...' : 'Create User' }}
            </button>
            <button type="button" class="btn btn-secondary" (click)="cancel()">Cancel</button>
        </div>
    </form>
</div>