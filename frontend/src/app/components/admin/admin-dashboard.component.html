<div class="admin-container">
    <div class="admin-header">
        <h1>üõ°Ô∏è Admin Dashboard</h1>
        <p>System overview and management</p>
    </div>

    <!-- Quick Stats -->
    <div class="stats-grid">
        <div class="stat-card users">
            <div class="stat-icon">üë•</div>
            <div class="stat-info">
                <span class="stat-value">{{ users().length }}</span>
                <span class="stat-label">Total Users</span>
            </div>
        </div>
        <div class="stat-card products">
            <div class="stat-icon">üì¶</div>
            <div class="stat-info">
                <span class="stat-value">{{ products().length }}</span>
                <span class="stat-label">Total Products</span>
            </div>
        </div>
        <div class="stat-card revenue">
            <div class="stat-icon">üí∞</div>
            <div class="stat-info">
                <span class="stat-value">${{ totalRevenue().toFixed(2) }}</span>
                <span class="stat-label">Total Value</span>
            </div>
        </div>
        <div class="stat-card profiles">
            <div class="stat-icon">üìä</div>
            <div class="stat-info">
                <span class="stat-value">{{ profiles().length }}</span>
                <span class="stat-label">User Profiles</span>
            </div>
        </div>
    </div>

    <!-- Profile Analytics -->
    <div class="analytics-section">
        <h2>üìà User Behavior Analytics</h2>
        <div class="analytics-grid">
            <div class="chart-card">
                <h3>Profile Distribution</h3>
                <div class="profile-bars">
                    @for (type of profileTypes(); track type.name) {
                    <div class="bar-item">
                        <div class="bar-label">
                            <span>{{ type.icon }} {{ type.name }}</span>
                            <span>{{ type.count }}</span>
                        </div>
                        <div class="bar-track">
                            <div class="bar-fill" [style.width.%]="type.percentage" [style.background]="type.color">
                            </div>
                        </div>
                    </div>
                    }
                </div>
            </div>
            <div class="chart-card">
                <h3>Activity Summary</h3>
                <div class="activity-stats">
                    <div class="activity-item">
                        <span class="activity-icon">üìñ</span>
                        <div class="activity-info">
                            <span class="activity-value">{{ totalReads() }}</span>
                            <span class="activity-label">Read Operations</span>
                        </div>
                    </div>
                    <div class="activity-item">
                        <span class="activity-icon">‚úèÔ∏è</span>
                        <div class="activity-info">
                            <span class="activity-value">{{ totalWrites() }}</span>
                            <span class="activity-label">Write Operations</span>
                        </div>
                    </div>
                    <div class="activity-item">
                        <span class="activity-icon">üíé</span>
                        <div class="activity-info">
                            <span class="activity-value">{{ totalExpensiveSearches() }}</span>
                            <span class="activity-label">Premium Searches</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Recent Activity -->
    <div class="tables-section">
        <div class="table-card">
            <div class="table-header">
                <h3>üë• Recent Users</h3>
                <a routerLink="/users" class="view-all">View All ‚Üí</a>
            </div>
            <table>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Age</th>
                    </tr>
                </thead>
                <tbody>
                    @for (user of users().slice(0, 5); track user.id) {
                    <tr>
                        <td>{{ user.name }}</td>
                        <td>{{ user.email }}</td>
                        <td>{{ user.age }}</td>
                    </tr>
                    } @empty {
                    <tr>
                        <td colspan="3" class="empty">No users found</td>
                    </tr>
                    }
                </tbody>
            </table>
        </div>

        <div class="table-card">
            <div class="table-header">
                <h3>üì¶ Recent Products</h3>
                <a routerLink="/products" class="view-all">View All ‚Üí</a>
            </div>
            <table>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Price</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    @for (product of products().slice(0, 5); track product.id) {
                    <tr>
                        <td>{{ product.name }}</td>
                        <td class="price">${{ product.price.toFixed(2) }}</td>
                        <td>
                            <span class="status" [ngClass]="getProductStatus(product).class">
                                {{ getProductStatus(product).text }}
                            </span>
                        </td>
                    </tr>
                    } @empty {
                    <tr>
                        <td colspan="3" class="empty">No products found</td>
                    </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>

    <!-- Top Users by Activity -->
    <div class="top-users-section">
        <h2>üèÜ Top Users by Activity</h2>
        <div class="top-users-grid">
            @for (profile of topProfiles(); track profile.id; let i = $index) {
            <div class="user-rank-card">
                <div class="rank-badge">{{ i + 1 }}</div>
                <div class="user-info">
                    <span class="user-name">{{ profile.userEmail || 'Anonymous' }}</span>
                    <span class="user-stats">
                        {{ profile.readOperations + profile.writeOperations }} actions
                    </span>
                </div>
                <div class="profile-badge" [ngClass]="'type-' + profile.profileType.toLowerCase().replace('_', '-')">
                    {{ profile.profileType }}
                </div>
            </div>
            }
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions">
        <h2>‚ö° Quick Actions</h2>
        <div class="actions-grid">
            <a routerLink="/users/create" class="action-card">
                <span class="action-icon">‚ûï</span>
                <span class="action-text">Add User</span>
            </a>
            <a routerLink="/sell" class="action-card">
                <span class="action-icon">üì¶</span>
                <span class="action-text">Add Product</span>
            </a>
            <a routerLink="/profiles" class="action-card">
                <span class="action-icon">üìä</span>
                <span class="action-text">View Profiles</span>
            </a>
            <a href="http://localhost:3000" target="_blank" class="action-card">
                <span class="action-icon">üìà</span>
                <span class="action-text">Grafana</span>
            </a>
        </div>
    </div>
</div>